# export_data_cegid
Exporting the data requested by BS

#### How to
num ticket: GL_NUMERO
Type de transaction: we start only with normal
SalesTime: formated in y-m-d-h-mi-s
SalesPerson
    Name: T_LIBELLE
    Identifier: GL_TIERS

barcode: GA_CODEBARRE
SalesDate: Y-M-D


Trying 1
```SQL
SELECT GL_NATUREPIECEG, FORMAT(GL_DATEPIECE,'yyyy-MM-dd'), GL_NUMERO, CC3.CC_LIBELLE as FN4,
GL_CODEARTICLE, GL_TIERS, T_LIBELLE, ART.GA_CODEBARRE AS CODEBARRE,
GL_QTEFACT, ROUND(GL_PRHT*1.20,-1) as ItemPriceCalculatedNetAmount, 
(GL_PUTTC*gl_qtefact) AS ItemPriceInformationInclTAXAmount, 
GL_TOTALTTC AS NormalSalesPrice, GL_REMISELIGNE, GL_DEVISE, 
FORMAT(GP_HEURECREATION,'yyyy-MM-dd-HH-mm-ss')
FROM GCLIGNEARTDIM  
LEFT OUTER JOIN ETABLISS ET1 ON GL_ETABLISSEMENT=ET1.ET_ETABLISSEMENT 
LEFT OUTER JOIN ARTICLECOMPL AC on GL_ARTICLE = GA2_ARTICLE
LEFT OUTER JOIN ARTICLE ART on GL_ARTICLE = GA_ARTICLE
LEFT OUTER JOIN CHOIXCOD CC3 ON AC.GA2_FAMILLENIV4=CC3.CC_CODE AND CC3.CC_TYPE='FN4'
WHERE ((GL_NATUREPIECEG = 'FFO') AND ((GL_TYPELIGNE <> 'COM' AND GL_TYPELIGNE <> 'TOT')) 
AND (GL_ETABLISSEMENT='008') AND (T_NATUREAUXI = 'CLI') AND GP_TICKETANNULE<>'X')  
ORDER BY GL_ETABLISSEMENT ,GL_CAISSE ,GL_NUMLIGNE
```

Trying2
```SQL
SELECT GL_TOTALTTC,GL_PUTTCNET,(GL_PUTTCNET*gl_qtefact) AS PrixTHeorique,
GL_PUTTC, (GL_PUTTC*gl_qtefact) AS PrixVente,GL_MONTANTTTC,GL_REMISELIGNE,gl_qtefact,*
FROM GCLIGNEARTDIM  
LEFT OUTER JOIN ETABLISS ET1 ON GL_ETABLISSEMENT=ET1.ET_ETABLISSEMENT 
LEFT OUTER JOIN ARTICLECOMPL AC on GL_ARTICLE = GA2_ARTICLE
LEFT OUTER JOIN ARTICLE ART on GL_ARTICLE = GA_ARTICLE
LEFT OUTER JOIN CHOIXCOD CC3 ON AC.GA2_FAMILLENIV4=CC3.CC_CODE AND CC3.CC_TYPE='FN4'
WHERE (GL_DATEPIECE > '20181201' AND (GL_NATUREPIECEG = 'FFO') AND ((GL_TYPELIGNE <> 'COM' AND GL_TYPELIGNE <> 'TOT')) 
AND (GL_ETABLISSEMENT='008') AND (T_NATUREAUXI = 'CLI') AND GP_TICKETANNULE<>'X') and gl_remiseligne > 0 
ORDER BY GL_ETABLISSEMENT ,GL_CAISSE ,GL_NUMLIGNE
```